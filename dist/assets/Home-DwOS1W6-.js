import{D as C,C as y}from"./index-BQ4MH4yd.js";import{U as O,d as se}from"./index-C1EDIjqW.js";/* empty css                   */import{d as L,r as k,a as _,c as q,o as B,b as a,w as i,e as U,u as e,t as S,f as d,i as T,E as $,g as K,h as ue,j as Z,_ as me,k as ie,F as H,l as J,m as X,n as Q,v as W}from"./index-B_e0YRMj.js";const pe={class:"f-c-c w-100%"},fe=L({__name:"DeleteItem",props:{database:{type:Object},data:{type:Object,required:!0},value:{type:Object,required:!0},currY:{type:String,required:!0},currM:{type:String,required:!0},index:{type:Number,required:!0}},setup(x){const b=x,p=k(!1);async function f(){const{data:n,currM:l,value:u,database:t,currY:m}=b,V=n.items[l].balance,D=V.findIndex(v=>v.id===u.id);D!==-1?(V.splice(D,1),await C.put(t,y.DB_RECORD,O.Objects.raw(n),m),p.value=!p.value):$.error("未找到删除的计划")}return(n,l)=>{const u=_("el-button"),t=_("el-form-item"),m=_("el-date-picker"),V=_("el-form"),D=_("el-dialog");return B(),q("div",null,[a(u,{size:"small",text:"",type:"danger",onClick:l[0]||(l[0]=v=>p.value=!e(p))},{default:i(()=>l[4]||(l[4]=[U(" 删除计划 ")])),_:1}),a(D,{modelValue:e(p),"onUpdate:modelValue":l[3]||(l[3]=v=>T(p)?p.value=v:null),"append-to-body":"",title:"删除计划",width:"90%"},{default:i(()=>[a(V,{ref:"formInst","hide-required-asterisk":"","label-position":"left","label-width":"auto","status-icon":""},{default:i(()=>[a(t,{label:"备注",prop:"text"},{default:i(()=>[U(S(x.data.items[x.currM].balance[x.index].text),1)]),_:1}),a(t,{label:"金额",prop:"cost"},{default:i(()=>[U(S(x.data.items[x.currM].balance[x.index].cost),1)]),_:1}),a(t,{label:"日期",prop:"datetime"},{default:i(()=>[a(m,{modelValue:x.data.items[x.currM].balance[x.index].datetime,"onUpdate:modelValue":l[1]||(l[1]=v=>x.data.items[x.currM].balance[x.index].datetime=v),disabled:"",placeholder:"请输入日期",style:{width:"100%"},type:"date"},null,8,["modelValue"])]),_:1}),a(t,{class:"mt-10"},{default:i(()=>[d("div",pe,[a(u,{class:"mr-4",plain:"",round:"",type:"danger",onClick:f},{icon:i(()=>l[5]||(l[5]=[d("div",{class:"i-tabler-trash"},null,-1)])),_:1}),a(u,{plain:"",round:"",type:"primary",onClick:l[2]||(l[2]=v=>p.value=!e(p))},{icon:i(()=>l[6]||(l[6]=[d("div",{class:"i-tabler-x"},null,-1)])),_:1})])]),_:1})]),_:1},512)]),_:1},8,["modelValue"])])}}}),be={class:"f-c-c w-100%"},_e=L({__name:"UpdateItem",props:{database:{type:Object},data:{type:Object,required:!0},value:{type:Object,required:!0},index:{type:Number,required:!0},currM:{type:String,required:!0},currY:{type:String,required:!0}},async setup(x){let b,p;const f=x,n=k(!1),l=k(),u=k({cost:[{validator:O.Forms.validateMoney,trigger:"change"}],text:[{required:!0,message:"请输入收支备注",trigger:"blur"},{min:1,max:50,message:"长度在1~50个字符之间",trigger:"blur"}],datetime:[{required:!0,message:"请输入日期时间",trigger:"change"}]}),t=k({...f.value}),{items:m}=([b,p]=K(()=>C.get(f.database,y.DB_COMMENTS,y.DB_KEY_COMMENTS)),b=await b,p(),b),V=k(m),D=(o,r)=>{const w=o?V.value.filter(O.createFilter(o)):V.value;r(w)};function v(o){t.value.cost=o.cost}function F(){t.value={...f.value},n.value=!n.value}function R(){const{data:o,currM:r,database:w,currY:M}=f,{formValidator:I}=O.Forms,{id:j}=t.value,g=o.items[r].balance;I(l.value,async()=>{const s=g.findIndex(Y=>Y.id===j);s!==-1?(g[s]=t.value,await C.put(w,y.DB_RECORD,O.Objects.raw(o),M),n.value=!n.value):$.error("未找到更新的计划")},()=>{$.error("检查输入的值是否正确")})}return(o,r)=>{const w=_("el-button"),M=_("el-autocomplete"),I=_("el-form-item"),j=_("el-input"),g=_("el-date-picker"),s=_("el-form"),Y=_("el-dialog");return B(),q("div",null,[a(w,{size:"small",text:"",type:"primary",onClick:F},{default:i(()=>r[5]||(r[5]=[U("编辑计划")])),_:1}),a(Y,{modelValue:e(n),"onUpdate:modelValue":r[4]||(r[4]=c=>T(n)?n.value=c:null),"append-to-body":"",title:"修改计划",width:"90%"},{default:i(()=>[a(s,{ref_key:"formInst",ref:l,model:e(t),rules:e(u),"hide-required-asterisk":"","label-position":"left","label-width":"auto","status-icon":""},{default:i(()=>[a(I,{label:"备注",prop:"text"},{default:i(()=>[a(M,{modelValue:e(t).text,"onUpdate:modelValue":r[0]||(r[0]=c=>e(t).text=c),"fetch-suggestions":D,"prefix-icon":e(ue),placeholder:"请输入备注",style:{width:"100%"},onSelect:v},null,8,["modelValue","prefix-icon"])]),_:1}),a(I,{label:"金额",prop:"cost"},{default:i(()=>[a(j,{modelValue:e(t).cost,"onUpdate:modelValue":r[1]||(r[1]=c=>e(t).cost=c),modelModifiers:{number:!0},"prefix-icon":e(Z),placeholder:"请输入金额",type:"number"},null,8,["modelValue","prefix-icon"])]),_:1}),a(I,{label:"日期",prop:"datetime"},{default:i(()=>[a(g,{modelValue:e(t).datetime,"onUpdate:modelValue":r[2]||(r[2]=c=>e(t).datetime=c),"disabled-date":c=>e(se)(c,x.currY,x.currM),placeholder:"请输入日期",style:{width:"100%"},type:"date"},null,8,["modelValue","disabled-date"])]),_:1}),a(I,{class:"mt-10"},{default:i(()=>[d("div",be,[a(w,{class:"mr-4",plain:"",round:"",onClick:r[3]||(r[3]=c=>n.value=!e(n))},{icon:i(()=>r[6]||(r[6]=[d("div",{class:"i-tabler-x"},null,-1)])),_:1}),a(w,{plain:"",round:"",type:"primary",onClick:R},{icon:i(()=>r[7]||(r[7]=[d("div",{class:"i-tabler-check"},null,-1)])),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ve={class:"f-c-c w-100%"},ye=L({__name:"AddItem",props:{database:{type:Object},data:{type:Object,required:!0},currY:{type:String,required:!0},currM:{type:String,required:!0}},async setup(x){let b,p;const f=x,n=k(!1),l=k({id:"",cost:0,text:"",datetime:O.Dates.nowDate("YY-MM-DD",new Date(Number(f.currY),Number(f.currM)-1))}),u=k(),t=k({cost:[{validator:O.Forms.validateMoney,trigger:"change"}],text:[{required:!0,message:"请输入备注",trigger:"change"},{min:1,max:50,message:"长度在1~50个字符之间",trigger:"change"}],datetime:[{required:!0,message:"请输入日期",trigger:"change"}]}),{items:m}=([b,p]=K(()=>C.get(f.database,y.DB_COMMENTS,y.DB_KEY_COMMENTS)),b=await b,p(),b),V=k(m);function D(){const{data:o,currM:r,database:w,currY:M}=f,{formValidator:I}=O.Forms,{generateRandomHash:j,Objects:g}=O,{value:s}=u,{value:Y}=n;I(s,async()=>{l.value.id=j(),o.items[r].balance.push({...l.value}),await C.put(w,y.DB_RECORD,g.raw(o),M),n.value=!Y},()=>{$.error("检查输入的值是否正确")})}const v=(o,r)=>{const w=o?V.value.filter(O.createFilter(o)):V.value;r(w)};function F(o){l.value.text=o.value,l.value.cost=o.cost,l.value.type=o.type}function R(){u.value.resetFields(),l.value.datetime=O.Dates.nowDate("YY-MM-DD",new Date(Number(f.currY),Number(f.currM)-1))}return(o,r)=>{const w=_("el-button"),M=_("el-autocomplete"),I=_("el-form-item"),j=_("el-input"),g=_("el-date-picker"),s=_("el-form"),Y=_("el-dialog");return B(),q("div",null,[a(w,{plain:"",round:"",size:"small",type:"success",onClick:r[0]||(r[0]=c=>n.value=!e(n))},{default:i(()=>r[6]||(r[6]=[U("添加计划")])),_:1}),a(Y,{modelValue:e(n),"onUpdate:modelValue":r[5]||(r[5]=c=>T(n)?n.value=c:null),"append-to-body":"",title:"添加一项计划",width:"90%",onOpened:R},{default:i(()=>[a(s,{ref_key:"formInst",ref:u,model:e(l),rules:e(t),"hide-required-asterisk":"","label-position":"left","label-width":"auto","status-icon":""},{default:i(()=>[a(I,{label:"备注",prop:"text"},{default:i(()=>[a(M,{modelValue:e(l).text,"onUpdate:modelValue":r[1]||(r[1]=c=>e(l).text=c),"fetch-suggestions":v,"prefix-icon":e(ue),placeholder:"请输入备注",style:{width:"100%"},onSelect:F},null,8,["modelValue","prefix-icon"])]),_:1}),a(I,{label:"金额",prop:"cost"},{default:i(()=>[a(j,{modelValue:e(l).cost,"onUpdate:modelValue":r[2]||(r[2]=c=>e(l).cost=c),modelModifiers:{number:!0},"prefix-icon":e(Z),placeholder:"请输入金额",type:"number"},null,8,["modelValue","prefix-icon"])]),_:1}),a(I,{label:"日期",prop:"datetime"},{default:i(()=>[a(g,{modelValue:e(l).datetime,"onUpdate:modelValue":r[3]||(r[3]=c=>e(l).datetime=c),"disabled-date":c=>e(se)(c,x.currY,x.currM),placeholder:"请输入日期",style:{width:"100%"},type:"date"},null,8,["modelValue","disabled-date"])]),_:1}),a(I,{class:"mt-10"},{default:i(()=>[d("div",ve,[a(w,{class:"mr-4",plain:"",round:"",onClick:r[4]||(r[4]=c=>n.value=!e(n))},{icon:i(()=>r[7]||(r[7]=[d("div",{class:"i-tabler-x"},null,-1)])),_:1}),a(w,{plain:"",round:"",type:"primary",onClick:D},{icon:i(()=>r[8]||(r[8]=[d("div",{class:"i-tabler-check"},null,-1)])),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ge=me(ye,[["__scopeId","data-v-6724167c"]]),xe={class:"f-c-c w-100%"},De=L({__name:"UpdateRecord",props:{database:{type:Object,required:!0},data:{type:Object,required:!0},currM:{type:String,required:!0},currY:{type:String,required:!0}},setup(x){var m,V;const b=x,p=k(!1),f=k(),n=k({budget:[{validator:O.Forms.validateMoney,trigger:"change"}]}),l=ie({budget:((V=(m=b.data)==null?void 0:m.items[b.currM])==null?void 0:V.budget)||0});function u(){var D,v;l.budget=((v=(D=b.data)==null?void 0:D.items[b.currM])==null?void 0:v.budget)||0,p.value=!p.value}function t(){const{data:D,currM:v,database:F,currY:R}=b,{formValidator:o}=O.Forms,{budget:r}=l,{value:w}=f,{value:M}=p;o(w,async()=>{D.items[v].budget=Number(r),await C.put(F,y.DB_RECORD,O.Objects.raw(D),R),p.value=!M},()=>{$.error("检查输入的值是否正确")})}return(D,v)=>{const F=_("el-button"),R=_("el-input"),o=_("el-form-item"),r=_("el-form"),w=_("el-dialog");return B(),q("div",null,[a(F,{plain:"",round:"",size:"small",type:"info",onClick:u},{default:i(()=>v[3]||(v[3]=[U("修改记录")])),_:1}),a(w,{modelValue:e(p),"onUpdate:modelValue":v[2]||(v[2]=M=>T(p)?p.value=M:null),"append-to-body":"",title:"修改记录",width:"90%"},{default:i(()=>[a(r,{ref_key:"formInst",ref:f,model:e(l),rules:e(n),"hide-required-asterisk":"","label-position":"left","status-icon":""},{default:i(()=>[a(o,{label:"预算",prop:"budget"},{default:i(()=>[a(R,{modelValue:e(l).budget,"onUpdate:modelValue":v[0]||(v[0]=M=>e(l).budget=M),modelModifiers:{number:!0},"prefix-icon":e(Z),type:"number"},null,8,["modelValue","prefix-icon"])]),_:1}),a(o,{class:"mt-10"},{default:i(()=>[d("div",xe,[a(F,{class:"mr-4",plain:"",round:"",onClick:v[1]||(v[1]=M=>p.value=!e(p))},{icon:i(()=>v[4]||(v[4]=[d("div",{class:"i-tabler-x"},null,-1)])),_:1}),a(F,{plain:"",round:"",type:"primary",onClick:t},{icon:i(()=>v[5]||(v[5]=[d("div",{class:"i-tabler-check"},null,-1)])),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Ce={class:"f-c-c w-100%"},Oe=L({__name:"CreateRecord",props:{database:{type:Object},data:{type:Object,required:!0},currM:{type:String,required:!0},currY:{type:String,required:!0},mList:{type:Array,required:!0}},emits:["onCreated"],async setup(x,{emit:b}){let p,f;const n=x,l=b,u=([p,f]=K(()=>C.get(n.database,y.DB_CONFIG,y.DB_KEY_CONFIG)),p=await p,f(),p),t=k(!1),m=ie({year:n.currY,month:"1月",budget:u.budget}),V=k(),D=k();function v(){O.Forms.formValidator(V.value,()=>{const R=m.month.split("月")[0];m.year!=n.currY?C.get(n.database,y.DB_RECORD,m.year).then(o=>{o?Object.keys(o.items).includes(R)?$.error("已有该记录"):(o.items[R]={surplus:0,budget:m.budget,balance:[]},C.put(n.database,y.DB_RECORD,O.Objects.raw(o),n.currY).then(()=>{t.value=!t.value,l("onCreated",m.year)})):C.add(n.database,y.DB_RECORD,{id:m.year,items:{[R]:{budget:m.budget,surplus:0,balance:[]}}}).then(()=>{t.value=!t.value,l("onCreated",m.year)})}):n.mList.includes(R)?$.error("已有该记录"):(n.data.items[R]={surplus:0,budget:m.budget,balance:[]},C.put(n.database,y.DB_RECORD,O.Objects.raw(n.data),n.currY).then(()=>{t.value=!t.value,l("onCreated",m.year)}))},()=>$.error("创建记录失败"))}const F=Array.from({length:12},(R,o)=>({value:`${o+1}`,label:`${o+1}`}));return(R,o)=>{const r=_("el-button"),w=_("el-date-picker"),M=_("el-form-item"),I=_("el-option"),j=_("el-select"),g=_("el-input"),s=_("el-form"),Y=_("el-dialog");return B(),q("div",null,[a(r,{plain:"",round:"",size:"small",type:"primary",onClick:o[0]||(o[0]=c=>t.value=!e(t))},{default:i(()=>o[7]||(o[7]=[U("创建记录")])),_:1}),a(Y,{modelValue:e(t),"onUpdate:modelValue":o[5]||(o[5]=c=>T(t)?t.value=c:null),"append-to-body":"",title:"创建记录",width:"90%",onOpened:o[6]||(o[6]=c=>e(V).resetFields())},{default:i(()=>[a(s,{ref_key:"formInst",ref:V,model:e(m),rules:e(D),"hide-required-asterisk":"","label-position":"left","status-icon":""},{default:i(()=>[a(M,{label:"年份",prop:"year"},{default:i(()=>[a(w,{modelValue:e(m).year,"onUpdate:modelValue":o[1]||(o[1]=c=>e(m).year=c),format:"YYYY",placeholder:"选择一个年份",style:{width:"100%"},type:"year","value-format":"YYYY"},null,8,["modelValue"])]),_:1}),a(M,{label:"月份",prop:"month"},{default:i(()=>[a(j,{modelValue:e(m).month,"onUpdate:modelValue":o[2]||(o[2]=c=>e(m).month=c),class:"w-100%"},{prefix:i(()=>o[8]||(o[8]=[d("div",{class:"i-tabler-calendar"},null,-1)])),default:i(()=>[(B(!0),q(H,null,J(e(F),c=>(B(),X(I,{key:c.value,label:c.label+"月",value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(M,{label:"预算",prop:"budget"},{default:i(()=>[a(g,{modelValue:e(m).budget,"onUpdate:modelValue":o[3]||(o[3]=c=>e(m).budget=c),modelModifiers:{number:!0},"prefix-icon":e(Z),type:"number"},null,8,["modelValue","prefix-icon"])]),_:1}),a(M,{class:"mt-10"},{default:i(()=>[d("div",Ce,[a(r,{class:"mr-4",plain:"",round:"",onClick:o[4]||(o[4]=c=>t.value=!e(t))},{icon:i(()=>o[9]||(o[9]=[d("div",{class:"i-tabler-x"},null,-1)])),_:1}),a(r,{plain:"",round:"",type:"primary",onClick:v},{icon:i(()=>o[10]||(o[10]=[d("div",{class:"i-tabler-check"},null,-1)])),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Ve=L({__name:"DeleteRecord",props:{database:{type:Object},data:{type:Object,required:!0},currM:{type:String,required:!0},currY:{type:String,required:!0},mList:{type:Array,required:!0}},emits:["onDeleted"],setup(x,{emit:b}){const p=x,f=b;function n(){const{mList:l,currM:u,data:t,database:m,currY:V}=p,D=O.deleteAndReturnNext(l,u);D?(delete t.items[u],C.put(m,y.DB_RECORD,O.Objects.raw(t),V).then(()=>C.put(m,y.DB_CONFIG,{id:y.DB_KEY_CONFIG,Y:V,M:D},y.DB_KEY_CONFIG)).then(()=>f("onDeleted",D)).catch(v=>{$.error("删除记录时发生错误"),console.error(v)})):$.error("至少保留一条记录")}return(l,u)=>{const t=_("el-button"),m=_("el-popconfirm");return B(),q("div",null,[a(m,{"cancel-button-text":"取消","confirm-button-text":"确定",title:"确定删除该记录？",onConfirm:n},{reference:i(()=>[a(t,{plain:"",round:"",size:"small",type:"danger"},{default:i(()=>u[0]||(u[0]=[U("删除记录")])),_:1})]),_:1})])}}}),we={class:"main"},ke={class:"mb-4"},Me={class:"f-c-b"},Ye={class:"mb-4"},Re={class:"f-c-b"},Ie={class:"mb-4"},Ee={class:"f-c-s text-text-regular text-0.8rem"},Be={class:"f-c-c"},Fe={class:"f-c-e text-text-regular text-0.8rem"},Ne={class:"f-c-c"},qe={class:"f-c-c text-red"},je={class:"f-c-c text-green"},Se={class:"mb-2 text-0.9rem text-text-secondary"},Ue={class:"w-100% f-c-b"},$e={class:"f-c-s"},Ge={class:"text-text-secondary"},Ae={class:"m-2"},He=L({__name:"Home",async setup(x){let b,p;const f=([b,p]=K(()=>C.create()),b=await b,p(),b),n=([b,p]=K(()=>C.get(f,y.DB_CONFIG,y.DB_KEY_CONFIG)),b=await b,p(),b),l=k(n.Y),u=k(n.M),t=k(([b,p]=K(()=>C.get(f,y.DB_RECORD,l.value)),b=await b,p(),b)),m=k(Object.keys(t.value.items)),V=k(([b,p]=K(()=>C.keys(f,y.DB_RECORD)),b=await b,p(),b)),D=k(0);function v(){if(!(t!=null&&t.value.items[u.value]))return 0;let g,s=0,Y=0;const c=m.value.sort((E,A)=>Number(E)-Number(A)),G=c.findIndex(E=>E===u.value);return G!==-1?(G===0||(t.value.items[c[G-1]].balance.forEach(E=>s+=Number(E.cost)),t.value.items[c[G]].balance.forEach(E=>Y+=Number(E.cost))),g=s!==0?(Y-s)/s*100*10/10:0):g=0,g}function F(g){let s=0;return g.forEach(Y=>{s+=Number(Y.cost)}),s}function R(){if(!(t!=null&&t.value.items[u.value]))return 0;const g=F(t.value.items[u.value].balance);return t.value.items[u.value].surplus=Number(t.value.items[u.value].budget-g),C.put(f,y.DB_RECORD,O.Objects.raw(t.value),l.value).then(()=>{D.value=v()}),t.value.items[u.value].surplus}function o(){return t!=null&&t.value.items[u.value]?F(t.value.items[u.value].balance):0}function r(){n.Y=l.value,n.M=u.value,C.put(f,y.DB_CONFIG,O.Objects.raw(n),y.DB_KEY_CONFIG),C.get(f,y.DB_RECORD,l.value).then(g=>{t.value=g,m.value=Object.keys(t.value.items),u.value=m.value[0]})}function w(){n.Y=l.value,n.M=u.value,C.put(f,y.DB_CONFIG,O.Objects.raw(n),y.DB_KEY_CONFIG)}async function M(g){C.get(f,y.DB_RECORD,g).then(s=>{t.value=s,C.keys(f,y.DB_RECORD).then(Y=>{V.value=Y,l.value=g,m.value=Object.keys(t.value.items),u.value=m.value[0],n.Y=l.value,n.M=u.value,C.put(f,y.DB_CONFIG,O.Objects.raw(n),y.DB_KEY_CONFIG)})})}function I(g){u.value=g,n.Y=l.value,n.M=u.value,C.put(f,y.DB_CONFIG,O.Objects.raw(n),y.DB_KEY_CONFIG)}function j(g){var z;const s={};(((z=g==null?void 0:g.items[u.value])==null?void 0:z.balance)||[]).forEach(E=>{const A=O.Dates.formatDate("YY-MM-DD HH:mm:ss",String(E.datetime)).split(" ")[0];s[A]||(s[A]=[]),s[A].push(E)});const c={},G=Object.keys(s).sort((E,A)=>new Date(E).getTime()-new Date(A).getTime());return n.itemAsc||G.reverse(),G.forEach(E=>{c[E]=s[E]}),c}return(g,s)=>{var ee,te,le,ae,oe,ne;const Y=_("el-option"),c=_("el-select"),G=Oe,z=De,E=ge,A=_e,de=fe,ce=_("el-dropdown");return B(),q("div",we,[d("div",ke,[s[2]||(s[2]=d("div",{class:"mb-2"},"日期",-1)),d("div",Me,[a(c,{modelValue:e(l),"onUpdate:modelValue":s[0]||(s[0]=N=>T(l)?l.value=N:null),class:"mr-4",onChange:r},{default:i(()=>[(B(!0),q(H,null,J(e(V),N=>(B(),X(Y,{key:N,label:N+"年",value:N},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(c,{modelValue:e(u),"onUpdate:modelValue":s[1]||(s[1]=N=>T(u)?u.value=N:null),onChange:w},{default:i(()=>[(B(!0),q(H,null,J(e(m),N=>(B(),X(Y,{key:N+"月",label:N+"月",value:N},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),d("div",Ye,[s[3]||(s[3]=d("div",{class:"mb-2"},"操作",-1)),d("div",Re,[a(Ve,{"curr-m":e(u),"curr-y":e(l),data:e(t),database:e(f),"m-list":e(m),onOnDeleted:I},null,8,["curr-m","curr-y","data","database","m-list"]),a(G,{"curr-m":e(u),"curr-y":e(l),data:e(t),database:e(f),"m-list":e(m),onOnCreated:M},null,8,["curr-m","curr-y","data","database","m-list"]),a(z,{"curr-m":e(u),"curr-y":e(l),data:e(t),database:e(f)},null,8,["curr-m","curr-y","data","database"]),a(E,{"curr-m":e(u),"curr-y":e(l),data:e(t),database:e(f)},null,8,["curr-m","curr-y","data","database"])])]),d("div",null,[d("div",Ie,[s[12]||(s[12]=d("div",{class:"mb-2"},"数据",-1)),d("div",Ee,[d("div",Be,[s[4]||(s[4]=d("div",{class:"i-tabler-coin text-text-secondary mr-1"},null,-1)),s[5]||(s[5]=d("span",{class:"text-text-secondary mr-1"},"本月预算",-1)),d("span",null,S((te=(ee=e(t))==null?void 0:ee.items[e(u)])==null?void 0:te.budget),1),s[6]||(s[6]=d("span",{class:"text-text-secondary mr-1"},"，剩余",-1)),Q(d("span",{class:"text-green"},S(R().toFixed(2)),513),[[W,((ae=(le=e(t))==null?void 0:le.items[e(u)])==null?void 0:ae.surplus)>=0]]),Q(d("span",{class:"text-red"},S(R().toFixed(2)),513),[[W,((ne=(oe=e(t))==null?void 0:oe.items[e(u)])==null?void 0:ne.surplus)<0]])])]),d("div",Fe,[d("div",Ne,[s[7]||(s[7]=d("div",{class:"i-tabler-minus text-text-secondary mr-1"},null,-1)),s[8]||(s[8]=d("span",{class:"text-text-secondary mr-1"},"已计划",-1)),d("span",null,S(o().toFixed(2)),1)]),s[11]||(s[11]=d("span",{class:"text-text-secondary mr-1"},"，较上月",-1)),Q(d("div",qe,[U(S(e(D).toFixed(2))+"% ",1),s[9]||(s[9]=d("div",{class:"i-tabler-caret-up"},null,-1))],512),[[W,e(D)>0]]),Q(d("div",je,[U(S(e(D).toFixed(2))+"% ",1),s[10]||(s[10]=d("div",{class:"i-tabler-caret-down"},null,-1))],512),[[W,e(D)<=0]])])]),d("div",null,[(B(!0),q(H,null,J(j(e(t)),(N,re)=>(B(),q("div",{key:re,class:"mb-4"},[d("div",Se,S(re),1),(B(!0),q(H,null,J(N,(P,h)=>(B(),X(ce,{key:h,class:"w-100% bg-bg-overlay p-4 rd-2 mt-2",trigger:"click"},{dropdown:i(()=>[d("div",Ae,[a(A,{"curr-m":e(u),"curr-y":e(l),data:e(t),database:e(f),index:h,value:P,class:"mb-2"},null,8,["curr-m","curr-y","data","database","index","value"]),a(de,{"curr-m":e(u),"curr-y":e(l),data:e(t),database:e(f),index:h,value:P},null,8,["curr-m","curr-y","data","database","index","value"])])]),default:i(()=>[d("div",Ue,[d("div",$e,S(P.text),1),d("div",Ge,S(P.cost),1)])]),_:2},1024))),128))]))),128))])])])}}});export{He as default};
